# 2025-11-03-15-21-14_코드리팩토링

## 요청 사항

text-to-markdown-by-llm.py와 process_rulebooks.py의 코드 중복 제거 및 기능 분리:

1. LLM으로 text to markdown 하는 과정은 /tools/text-to-markdown-by-llm.py에서만 처리
2. 함수 나열 방식을 객체 지향으로 변경 (TextToMarkdownConverter 클래스)
3. process_rulebooks.py에서는 해당 클래스를 import하여 사용

## 수행 작업

### 1. TextToMarkdownConverter 클래스 작성

`/tools/text-to-markdown-by-llm.py`:
- 함수 기반 → 클래스 기반으로 리팩토링
- TextToMarkdownConverter 클래스 생성
  - `__init__()`: OpenAI 클라이언트 초기화, 모델 선택 가능
  - `read_file()`: 파일 읽기
  - `save_file()`: 파일 저장
  - `convert()`: 텍스트를 마크다운으로 변환 (LLM 호출)
  - `convert_file()`: 파일 입력 → 변환 → 파일 저장 (전체 프로세스)

### 2. process_rulebooks.py 수정

`process_text_to_final()` 함수:
- 중복된 LLM 호출 코드 제거 (65줄 → 18줄)
- TextToMarkdownConverter 객체 import 및 사용
- 깔끔한 코드 구조 유지

### 3. 테스트 코드 개선

`text-to-markdown-by-llm.py`의 main():
- 클래스 사용 예제로 재작성
- 독립적으로 실행 가능

## 결과

- 단일 책임 원칙(SRP) 준수: LLM 변환 로직은 한 곳에서만 관리
- 재사용성 향상: 다른 스크립트에서도 쉽게 사용 가능
- 유지보수 용이: 프롬프트나 모델 변경 시 한 곳만 수정
- 코드 중복 제거: process_rulebooks.py가 훨씬 간결해짐
